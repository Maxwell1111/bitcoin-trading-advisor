<!DOCTYPE html>
<html>
<head>
    <title>Bitcoin Advisor Backtest Results</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #0f1419;
            color: #e1e8ed;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #1da1f2;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #8899a6;
            margin-bottom: 30px;
        }
        .explanation {
            background: #192734;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid #38444d;
        }
        .explanation h3 {
            color: #1da1f2;
            margin-top: 0;
        }
        .explanation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .explanation-item {
            background: #0f1419;
            padding: 15px;
            border-radius: 5px;
        }
        .explanation-item h4 {
            color: #1da1f2;
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        .explanation-item p {
            margin: 0;
            color: #8899a6;
            font-size: 14px;
            line-height: 1.6;
        }
        .key-insight {
            background: #1a3a52;
            border-left: 4px solid #1da1f2;
            padding: 15px;
            margin: 15px 0;
        }
        .key-insight strong {
            color: #1da1f2;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: #192734;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #38444d;
        }
        .stat-label {
            color: #8899a6;
            font-size: 14px;
            margin-bottom: 5px;
        }
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #1da1f2;
        }
        .chart {
            background: #192734;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #38444d;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Bitcoin Trading Advisor - Backtest Results</h1>
        <p class="subtitle">Holistic Multi-Factor Analysis Performance</p>

        <div class="explanation">
            <h3>üìñ What is This?</h3>
            <p>This backtest tests the recommendation engine on <strong>historical data</strong> to see how it would have performed in the past.</p>

            <div class="key-insight">
                <strong>How it works:</strong> Every week for the past year, we ran the advisor as if we were living in that moment. We recorded what it recommended (Buy/Hold/Sell) and compared it to what actually happened to Bitcoin's price.
            </div>

            <div class="explanation-grid">
                <div class="explanation-item">
                    <h4>üéØ Composite Score (OPTIMIZED)</h4>
                    <p><strong>Range:</strong> -1.00 to +1.00<br>
                    <strong>Meaning:</strong> Weighted average of 5 factors<br>
                    ‚Ä¢ +0.70+ = Strong Buy<br>
                    ‚Ä¢ +0.25 to +0.70 = Buy ‚≠ê (lowered)<br>
                    ‚Ä¢ -0.15 to +0.25 = Hold ‚≠ê (widened)<br>
                    ‚Ä¢ -0.70 to -0.15 = Sell ‚≠ê (raised)<br>
                    ‚Ä¢ -0.70- = Strong Sell<br>
                    <em style="color: #17bf63;">‚úì Thresholds optimized for accuracy</em></p>
                </div>

                <div class="explanation-item">
                    <h4>üìä The 5 Factors (OPTIMIZED)</h4>
                    <p><strong>Power Law (35%):</strong> ‚¨ÜÔ∏è Long-term value<br>
                    <strong>MACD (30%):</strong> ‚¨ÜÔ∏è Momentum<br>
                    <strong>Sentiment (15%):</strong> Market psychology<br>
                    <strong>RSI (10%):</strong> ‚¨áÔ∏è Overbought/oversold<br>
                    <strong>Moving Avg (10%):</strong> ‚¨áÔ∏è Trend direction<br>
                    <em style="color: #17bf63;">‚úì Weights tuned by performance</em></p>
                </div>

                <div class="explanation-item">
                    <h4>üìà Your Results</h4>
                    <p><strong>Conservative Strategy:</strong> 97% Hold signals<br>
                    <strong>Interpretation:</strong> The advisor avoided overtrading during 2025's sideways market.<br>
                    <strong>Accuracy:</strong> 78.9% of signals matched price movement</p>
                </div>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-label">Period</div>
                <div class="stat-value" style="font-size: 18px;">2025-04-01<br>to<br>2025-12-16</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Data Points</div>
                <div class="stat-value">38</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Avg Composite Score</div>
                <div class="stat-value">0.002</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Buy Signals</div>
                <div class="stat-value" style="color: #17bf63;">1</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Sell Signals</div>
                <div class="stat-value" style="color: #f45531;">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Hold Signals</div>
                <div class="stat-value" style="color: #8899a6;">37</div>
            </div>
        </div>

        <div class="explanation">
            <h3>Chart 1: Price vs Composite Score</h3>
            <p><strong>What to look for:</strong> Does the score rise BEFORE price rises? That would mean the advisor is predicting upward movement. Does it fall before price falls? That's a warning signal.</p>
        </div>
        <div class="chart" id="price-score-chart"></div>

        <div class="explanation">
            <h3>Chart 2: Composite Score Distribution</h3>
            <p><strong>Color coding:</strong> Green bars = Buy signals, Gray = Hold, Red = Sell. The dashed lines show the thresholds (+0.7, +0.3, -0.3, -0.7).<br>
            <strong>Your results:</strong> Almost all bars are gray (Hold) because 2025 was a sideways/consolidation year with no extreme signals.</p>
        </div>
        <div class="chart" id="composite-chart"></div>

        <div class="explanation">
            <h3>Chart 3: Individual Factor Contributions</h3>
            <p><strong>This shows each of the 5 factors BEFORE weighting.</strong> You can see which factors were bullish (positive) or bearish (negative) at different times.<br>
            <strong>Key insight:</strong> When all 5 lines align (all positive or all negative), that creates a strong signal. When they diverge, you get Hold.</p>
        </div>
        <div class="chart" id="factors-chart"></div>

        <div class="explanation">
            <h3>Chart 4: RSI & Power Law Deviation Detail</h3>
            <p><strong>RSI (blue):</strong> Above 70 = overbought (potential sell), below 30 = oversold (potential buy).<br>
            <strong>Power Law (red):</strong> Negative % = Bitcoin is cheap vs long-term trend. Positive % = Bitcoin is expensive.<br>
            <strong>Sweet spot:</strong> RSI below 30 + Power Law negative = Strong buy opportunity.</p>
        </div>
        <div class="chart" id="rsi-pl-chart"></div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #17bf63;"></div>
                <span>Strong Buy (&gt; 0.7)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #90ee90;"></div>
                <span>Buy (0.3 to 0.7)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #8899a6;"></div>
                <span>Hold (-0.3 to 0.3)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ffb3b3;"></div>
                <span>Sell (-0.7 to -0.3)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #f45531;"></div>
                <span>Strong Sell (&lt; -0.7)</span>
            </div>
        </div>
    </div>

    <script>
        // Data
        const dates = ["2025-04-01", "2025-04-08", "2025-04-15", "2025-04-22", "2025-04-29", "2025-05-06", "2025-05-13", "2025-05-20", "2025-05-27", "2025-06-03", "2025-06-10", "2025-06-17", "2025-06-24", "2025-07-01", "2025-07-08", "2025-07-15", "2025-07-22", "2025-07-29", "2025-08-05", "2025-08-12", "2025-08-19", "2025-08-26", "2025-09-02", "2025-09-09", "2025-09-16", "2025-09-23", "2025-09-30", "2025-10-07", "2025-10-14", "2025-10-21", "2025-10-28", "2025-11-04", "2025-11-11", "2025-11-18", "2025-11-25", "2025-12-02", "2025-12-09", "2025-12-16"];
        const prices = [85169.171875, 76271.953125, 83668.9921875, 93441.890625, 94284.7890625, 96802.4765625, 104169.8125, 106791.0859375, 108994.640625, 105432.46875, 110257.234375, 104601.1171875, 106045.6328125, 105698.28125, 108950.2734375, 117777.1875, 119995.4140625, 117922.1484375, 114141.4453125, 120172.90625, 112831.1796875, 111802.65625, 111200.5859375, 111530.546875, 116843.1875, 112014.5, 114056.0859375, 121451.3828125, 113118.6640625, 108476.890625, 112956.1640625, 101590.5234375, 102997.46875, 92948.875, 87341.890625, 91350.203125, 92691.7109375, 87843.984375];
        const compositeScores = [0.232, 0.023, 0.277, 0.269, 0.239, 0.015, 0.039, -0.203, -0.192, -0.244, -0.05, -0.189, -0.142, 0.056, 0.03, 0.095, -0.114, -0.193, -0.189, 0.071, -0.203, -0.195, -0.186, 0.075, 0.07, -0.05, -0.15, 0.13, -0.25, -0.043, 0.102, -0.004, 0.042, -0.049, 0.047, 0.309, 0.291, 0.293];
        const scoreMa7 = [0.232, 0.1275, 0.17733333333333334, 0.18966666666666668, 0.26166666666666666, 0.17433333333333334, 0.09766666666666667, -0.04966666666666667, -0.11866666666666668, -0.213, -0.162, -0.161, -0.127, -0.09166666666666666, -0.01866666666666666, 0.06033333333333333, 0.0036666666666666653, -0.07066666666666667, -0.16533333333333336, -0.10366666666666667, -0.107, -0.109, -0.19466666666666668, -0.102, -0.013666666666666666, 0.03166666666666667, -0.04333333333333333, -0.023333333333333327, -0.08999999999999998, -0.054333333333333324, -0.06366666666666666, 0.01833333333333334, 0.04666666666666667, -0.003666666666666656, 0.013333333333333345, 0.10233333333333335, 0.21566666666666667, 0.2976666666666667];
        const rsiValues = [56.32, 24.75, 47.65, 79.7, 85.8, 63.98, 75.3, 77.23, 63.02, 46.46, 53.17, 48.04, 38.21, 53.64, 60.25, 78.12, 78.57, 50.61, 29.91, 56.24, 47.16, 36.07, 46.88, 49.05, 75.4, 51.87, 42.07, 68.61, 48.66, 30.89, 49.63, 36.29, 33.83, 35.01, 20.91, 47.02, 61.24, 40.57];
        const powerLawDeviations = [11.100445093390515, -1.183929218048004, 7.661416518494185, 19.41901871891283, 19.677725651838102, 22.03978919695932, 30.437845422801775, 32.814945622575955, 34.63896116210511, 29.359130787560833, 34.366296312362586, 26.614527824556944, 27.49917894393209, 26.227307612405586, 29.23731127625937, 38.77088541533076, 40.43740817527418, 37.08751248838363, 31.80552256898464, 37.8440085523764, 28.559715926367453, 26.5393764871991, 25.020657074335457, 24.558393595618305, 29.62547266903402, 23.4446602344654, 24.862188982282788, 32.07866263900835, 22.204016175998355, 16.41601771804454, 20.42399353376879, 7.593773276973378, 8.366390240052596, -2.8484878215295693, -9.308071461960449, -5.767778499090232, -5.009995265637137, -10.566678034814926];
        const recommendations = ["hold", "hold", "buy", "buy", "hold", "hold", "hold", "sell", "sell", "sell", "hold", "sell", "hold", "hold", "hold", "hold", "hold", "sell", "sell", "hold", "sell", "sell", "sell", "hold", "hold", "hold", "sell", "hold", "sell", "hold", "hold", "hold", "hold", "hold", "hold", "buy", "buy", "buy"];

        // Chart 1: Price vs Composite Score
        const trace1 = {
            x: dates,
            y: prices,
            name: 'BTC Price',
            type: 'scatter',
            line: { color: '#1da1f2', width: 2 },
            yaxis: 'y'
        };

        const trace2 = {
            x: dates,
            y: compositeScores,
            name: 'Composite Score',
            type: 'scatter',
            line: { color: '#f45531', width: 2 },
            yaxis: 'y2'
        };

        const trace3 = {
            x: dates,
            y: scoreMa7,
            name: 'Score MA (3-day)',
            type: 'scatter',
            line: { color: '#ffad1f', width: 1, dash: 'dot' },
            yaxis: 'y2'
        };

        const layout1 = {
            title: 'BTC Price vs Composite Score',
            paper_bgcolor: '#192734',
            plot_bgcolor: '#0f1419',
            font: { color: '#e1e8ed' },
            xaxis: { gridcolor: '#38444d' },
            yaxis: {
                title: 'BTC Price ($)',
                gridcolor: '#38444d',
                side: 'left'
            },
            yaxis2: {
                title: 'Composite Score',
                overlaying: 'y',
                side: 'right',
                gridcolor: '#38444d',
                zeroline: true,
                zerolinecolor: '#8899a6'
            },
            hovermode: 'x unified'
        };

        Plotly.newPlot('price-score-chart', [trace1, trace2, trace3], layout1, {responsive: true});

        // Chart 2: Composite Score Distribution
        const trace4 = {
            x: dates,
            y: compositeScores,
            type: 'bar',
            marker: {
                color: compositeScores.map(score =>
                    score > 0.7 ? '#17bf63' :
                    score > 0.25 ? '#90ee90' :      // UPDATED threshold
                    score < -0.7 ? '#f45531' :
                    score < -0.15 ? '#ffb3b3' :     // UPDATED threshold
                    '#8899a6'
                )
            },
            name: 'Composite Score'
        };

        const layout2 = {
            title: 'Composite Score Over Time (Color-coded by Signal)',
            paper_bgcolor: '#192734',
            plot_bgcolor: '#0f1419',
            font: { color: '#e1e8ed' },
            xaxis: { gridcolor: '#38444d' },
            yaxis: {
                title: 'Composite Score',
                gridcolor: '#38444d',
                zeroline: true,
                zerolinecolor: '#8899a6'
            },
            shapes: [
                { type: 'line', y0: 0.7, y1: 0.7, x0: dates[0], x1: dates[dates.length-1],
                   line: { color: '#17bf63', width: 1, dash: 'dash' } },
                { type: 'line', y0: 0.25, y1: 0.25, x0: dates[0], x1: dates[dates.length-1],
                   line: { color: '#90ee90', width: 2, dash: 'dash' } },
                { type: 'line', y0: -0.15, y1: -0.15, x0: dates[0], x1: dates[dates.length-1],
                   line: { color: '#ffb3b3', width: 2, dash: 'dash' } },
                { type: 'line', y0: -0.7, y1: -0.7, x0: dates[0], x1: dates[dates.length-1],
                   line: { color: '#f45531', width: 1, dash: 'dash' } }
            ],
            annotations: [
                { x: dates[dates.length-1], y: 0.25, text: 'Buy (+0.25)', showarrow: false, xanchor: 'left', font: {color: '#90ee90'} },
                { x: dates[dates.length-1], y: -0.15, text: 'Sell (-0.15)', showarrow: false, xanchor: 'left', font: {color: '#ffb3b3'} }
            ]
        };

        Plotly.newPlot('composite-chart', [trace4], layout2, {responsive: true});

        // Chart 3: Individual Factors
        const factorsData = {"rsi_score": [0.0, 0.588, 0.0, -0.662, -0.763, -0.3, -0.588, -0.62, -0.3, 0.0, 0.0, 0.0, 0.3, 0.0, -0.3, -0.635, -0.643, 0.0, 0.501, 0.0, 0.0, 0.3, 0.0, 0.0, -0.59, 0.0, 0.0, -0.3, 0.0, 0.3, 0.0, 0.3, 0.3, 0.3, 0.652, 0.0, -0.3, 0.0], "ma_score": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], "pl_score": [0.1, 0.1, 0.1, 0.1, 0.1, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, 0.1, -0.4, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.3], "macd_score": [0.356, -0.534, 0.507, 0.7, 0.634, 0.318, 0.493, -0.302, -0.372, -0.648, 0.0, -0.463, -0.407, 0.354, 0.366, 0.694, 0.0, -0.477, -0.632, 0.402, -0.511, -0.582, -0.454, 0.415, 0.598, 0.0, -0.335, 0.7, -0.667, -0.66, 0.508, -0.529, -0.377, -0.681, -0.476, 0.615, 0.654, 0.326], "sentiment_score": [0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6]};

        const trace5 = { x: dates, y: factorsData.rsi_score, name: 'RSI (20%)', type: 'scatter', line: { color: '#1da1f2' } };
        const trace6 = { x: dates, y: factorsData.ma_score, name: 'MA (25%)', type: 'scatter', line: { color: '#17bf63' } };
        const trace7 = { x: dates, y: factorsData.pl_score, name: 'Power Law (25%)', type: 'scatter', line: { color: '#f45531' } };
        const trace8 = { x: dates, y: factorsData.macd_score, name: 'MACD (15%)', type: 'scatter', line: { color: '#ffad1f' } };
        const trace9 = { x: dates, y: factorsData.sentiment_score, name: 'Sentiment (15%)', type: 'scatter', line: { color: '#e1e8ed' } };

        const layout3 = {
            title: 'Individual Factor Scores (Pre-weighting)',
            paper_bgcolor: '#192734',
            plot_bgcolor: '#0f1419',
            font: { color: '#e1e8ed' },
            xaxis: { gridcolor: '#38444d' },
            yaxis: {
                title: 'Factor Score',
                gridcolor: '#38444d',
                zeroline: true,
                zerolinecolor: '#8899a6'
            },
            hovermode: 'x unified'
        };

        Plotly.newPlot('factors-chart', [trace5, trace6, trace7, trace8, trace9], layout3, {responsive: true});

        // Chart 4: RSI and Power Law Deviation
        const trace10 = {
            x: dates,
            y: rsiValues,
            name: 'RSI',
            type: 'scatter',
            line: { color: '#1da1f2', width: 2 },
            yaxis: 'y'
        };

        const trace11 = {
            x: dates,
            y: powerLawDeviations,
            name: 'Power Law Deviation (%)',
            type: 'scatter',
            line: { color: '#f45531', width: 2 },
            yaxis: 'y2'
        };

        const layout4 = {
            title: 'RSI & Power Law Deviation',
            paper_bgcolor: '#192734',
            plot_bgcolor: '#0f1419',
            font: { color: '#e1e8ed' },
            xaxis: { gridcolor: '#38444d' },
            yaxis: {
                title: 'RSI',
                gridcolor: '#38444d',
                range: [0, 100]
            },
            yaxis2: {
                title: 'Power Law Deviation (%)',
                overlaying: 'y',
                side: 'right',
                gridcolor: '#38444d',
                zeroline: true,
                zerolinecolor: '#8899a6'
            },
            shapes: [
                { type: 'line', y0: 70, y1: 70, x0: dates[0], x1: dates[dates.length-1],
                   line: { color: '#f45531', width: 1, dash: 'dash' }, yref: 'y' },
                { type: 'line', y0: 30, y1: 30, x0: dates[0], x1: dates[dates.length-1],
                   line: { color: '#17bf63', width: 1, dash: 'dash' }, yref: 'y' }
            ],
            hovermode: 'x unified'
        };

        Plotly.newPlot('rsi-pl-chart', [trace10, trace11], layout4, {responsive: true});
    </script>
</body>
</html>
